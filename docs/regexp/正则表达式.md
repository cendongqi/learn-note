# 正则表达式

### 普通字符

字母、数字、汉字，下划线及没有任何特殊含义的标点符号，匹配字符串时匹配相同的字符

```
表达式：love
字符串：i love China
匹配结果：love
```

### 简单的转义字符

|                            表达式                            |                 含义                 |
| :----------------------------------------------------------: | :----------------------------------: |
|                              \n                              |                换行符                |
|                              \t                              |           制表符（tab键）            |
| \^，\\$，\\.，\\(，\\)，\\{，\\}，\\?，\\+，\\*，\\\，\\[，\\] |失去特殊含义，代表字符本身 |

## 标准字符集合

正则表达式规定的特殊字符

**<u>注意区分大小写，大小写表示相反的意思</u>**

例如：``` \d```表示任意一个数字，```\D```则表示除了数字以外的任意一个字符

| 表达式 |                             含义                             |
| :----: | :----------------------------------------------------------: |
|   \d   |               任意一个数字买，0-9中的任意一个                |
|   \w   | 任意一个字母或数字或下划线，也就是A-Z，a-z，0-9，_ 中的任意一个 |
|   \s   |   包括空格、制表符，换行符等**<u>空白字符</u>**的任意一个    |
|   .    | 小数点可以匹配任意一个字符（除了换行符）<br/>如果要匹配包括`\n`在内的所有字符，一般用`[\s\S]` |

## 自定义字符集合

自定义匹配规则，能够匹配方括号中任意一个字符，方括号里的匹配字符是“或”的关系

|  表达式   |                   含义                   |
| :-------: | :--------------------------------------: |
|  [ab5@]   |          匹配“a”或“b”或“5”或“@”          |
|  [^ abc]  | 匹配“a”，“b”， “c”**之外**的任意一个字符 |
|   [f-k]   |      匹配“f”~“k”之间的任意一个字母       |
| [^A-F0-3] |  匹配“A”~“F”，“0”~“3”之外的任意一个字符  |

tips：

- 正则表达式中的特殊符号，在中括号中失去特殊含义，代表字符本身，除了“^”和“-”
- 除**小数点**外，标准字符集合包含在中扩号时，自定义字符集合拥有该标准字符集合，例如：`[\d.\-+]`匹配数字，小数点，-，+

### 量词

修饰匹配次数的特殊符号

| 表达式 |                             含义                             |
| :----: | :----------------------------------------------------------: |
|  {n}   |    表达式重复n次<br/>例：`\d{4}`代表匹配连续4位数的字符集    |
| {m, n} | 表达式至少重复m次，最多重复n次<br/>例：`\d{3,5}`代表匹配至少3位数，最多6位数 |
|  {m,}  | 表达式至少重复n次<br/>例子：`\d{3,}`代表匹配3，4，5，...，n位数 |
|   ?    | 匹配表达式0次或1次，相当于{0, 1}<br/>例子：`a\d?b`相当于`a\d{0,1}b`，匹配`a3b`，不匹配`a12b` |
|   +    |                匹配表达式至少1次，相当于{1,}                 |
|   *    |             匹配表达式0次或任意多次，相当于{0,}              |

- 贪婪模式，匹配字符越多越好，默认
  - `\d{3,6}`在匹配字符`123456`时匹配了6位数，在匹配到3位时仍不满足，继续匹配直到不满足条件为止
- 非贪婪模式，匹配字符越少越好，修饰匹配次数的符号后再加上一个“?”
  - `\d{3,6}?`在匹配字符`123456`时匹配了3位数，匹配到3位数后进入下一轮匹配

tips：

- 量词符号只修饰前一个表达式，不修饰前前一个表达式。例如：`\d\d{5}`表示匹配6位数
- 修饰整个表达式用括号包含进来。例如：`(\d\d){5}`表示匹配12位数
- 表达式`?`和`{n}?`后面的`?`是不同的，前者表示匹配表达式0次或1次，后者表示非贪婪模式

### 字符边界

匹配的不是字符，而是某个符合条件的**位置**

| 表达式 |                             含义                             |
| :----: | :----------------------------------------------------------: |
|   ^    | 匹配字符串开始的位置<br/>例子：`^a`匹配`abbabba`的第一个a的位置，并且左边不能有其他符号 |
|   $    | 匹配字符串结束的位置<br/>例子：`a$`匹配`abbabba`的最后一个a的位置，并且右边不能有其他字符，不能匹配到`abbabbas`中的最后一个a的位置 |
|   \b   | 匹配一个单词边界，前面的字符和后面的字符**不全是\w**<br/>例子：`world\b`可以匹配`6world`，但不能匹配`world6`，因为d可以用\w表示，6也可以用\w表示 |

匹配模式：

- 忽略大小写模式
  - 匹配时忽略大小写
  - 正则表达式默认时区分大小写的
- 单行模式
  - 整个文本看作一个字符串，只有一个开头，一个结尾
  - 使小数点“.”可以匹配包含换行符（\n）在内的任意字符
- 多行模式
  - 每行都是一个字符串，每行都有一个开头，一个结尾
  - 如果仅匹配字符串的开始和结束，使用`\A`和`\Z`，这两个符号相当于单行模式的`^`和`$`

tips:

- 零宽表示匹配一个位置，而不是字符，位置是没有宽度的
- `^`在中括号外表示字符串开始的位置，在中括号内表示除表达式以外的任意字符

### 分支结构-捕获组-反向引用

#### 选择符和分组

|     表达式     |                             含义                             |
| :------------: | :----------------------------------------------------------: |
|       \|       |          左右表达式之间“或”的关系，匹配左边或者右边          |
| ()<br />捕获组 | (1).在修饰匹配次数的时候，括号中的表达式可以作为整体被修饰<br />(2).括号中的内容会被保存在内存中，可以单独的取到<br />(3).每一对括号会被分配一个编号，根据左括号的顺序从1开始自动编号 |
| (?:expression) | 不得不使用()，但是又不希望保存()里表达式匹配的内容，使用非捕获组不保存匹配的文本内容，节省内存 |

#### 反向引用（\nnn）

- 每一对()会分配一个编号，使用()的捕获**根据左括号的顺序从1开始自动编号**
- 通过反向引用，可以对**分组已捕获的字符串**进行引用
  - 例如：`([a-z]{2})\1`匹配`gogo`

tips:

- 编号以左括号为准
- 捕获组：()内的表达式匹配文本内容后暂时保存在内存中
-  分组：每个()都表示一个组

### 预搜索（零宽断言）

只进行子表达式的匹配，匹配的结果不计入最终的匹配内容

|  表达式  |                             含义                             |
| :------: | :----------------------------------------------------------: |
| (?=exp)  | 断言自身出现的位置的后面能匹配表达式exp<br />例如：`[a-z]+(?=ing)`可以匹配`going,doing`中的`go,do`，但不能匹配后面的ing |
| (?<=exp) |           断言自身出现的位置的前面能匹配表达式exp            |
| (?!=exp) |        断言自身出现的位置的后面**不能**匹配表达式exp         |
| (?<!exp) |        断言自身出现的位置的前面**不能**匹配表达式exp         |

tips：

- 零宽断言是一个独立的表达式，断言表达式的后边或前边是否符合条件
- 判断当前位置的前后字符，是否符合指定的条件，但不匹配前后的字符。是对**位置的匹配**
- 正则表达式匹配过程中，如果子表达式匹配到的是字符的内容，并被保存到最终的匹配结果中，那么就认为这个子表达式是占有字符的；如果子表达式匹配的仅仅是位置，或者匹配的内容不保存到最终的匹配结果中，那么就认为这个子表达式时**零宽度**的。占有字符还是零宽度，<u>是针对匹配的内容是否保存到最终的匹配结果中而言的</u>